<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../../WEB-INF/template/plantillaPublicaciones.xhtml">

            <ui:define name="content">
                <h:head>
                    <title>Nuevo usuario</title>
                </h:head>
                <h:outputScript library="js" name="spanishcalendar.js"/>
                <h:body>
                    <h:form>
                        <h1 style="margin-top:0">Alta de nuevo usuario</h1>
                        <p:panelGrid id="grid" columns="2" 
                             layout="grid"
                             styleClass="ui-panelgrid-blank ui-fluid"
                             style="border:0px none; background-color:transparent;">
                            <p:fieldset legend="Datos personales">
                                <p:panelGrid columns="3">
                                    <p:outputLabel for="name" value="Nombre:"/>
                                    <p:inputText required="true" requiredMessage="Obligatorio" id="name" value="#{altaUsuarioController.persona.nombrePersona}"/>
                                    <p:message for="name"/>

                                    <p:outputLabel for="ap1" value="Primer apellido:"/>
                                    <p:inputText required="true" id="ap1" requiredMessage="Obligatorio" value="#{altaUsuarioController.persona.apellido1}"/>
                                    <p:message for="ap1"/>

                                    <p:outputLabel for="ap2" value="Segundo apellido:"/>
                                    <p:inputText id="ap2" value="#{altaUsuarioController.persona.apellido2}"/>
                                    <div />

                                    <p:outputLabel for="sex" value="Sexo:"/>
                                    <p:selectOneButton id="sex" value="#{altaUsuarioController.persona.sexo}">
                                        <f:selectItem itemLabel="Masculino" itemValue='M'/>
                                        <f:selectItem itemLabel="Femenino" itemValue='F'/>
                                    </p:selectOneButton>
                                    <div />

                                    <p:outputLabel for="date" value="Fecha de nacimiento:"/>
                                    <p:calendar required="true" id="date" requiredMessage="Obligatorio" showOn="button" locale="es" value="#{altaUsuarioController.persona.fechaNacimiento}"/>
                                    <p:message for="date"/>
                                </p:panelGrid>
                            </p:fieldset>

                            <p:fieldset legend="Datos de acceso">
                                <p:panelGrid columns="3">
                                    <p:outputLabel for="rol" value="Rol:"/>
                                    <p:selectOneMenu id="rol" value="#{altaUsuarioController.rol}">
                                        <f:selectItems value="#{altaUsuarioController.roles}"/>
                                    </p:selectOneMenu>
                                    <div/>

                                    <p:outputLabel for="username" value="Nombre de usuario:"/>
                                    <p:inputText id="username" required="true" requiredMessage="Obligatorio" value="#{altaUsuarioController.user.user}"/>
                                    <p:message for="username"/>

                                    <p:outputLabel for="pass" value="Password:"/>
                                    <p:password id="pass" required="true" match="pass2" requiredMessage="Obligatorio" value="#{altaUsuarioController.user.password}" toggleMask="true" redisplay="true"/>
                                    <p:message for="pass"/>

                                    <p:outputLabel for="pass2" value="Repite password:"/>
                                    <p:password id="pass2" required="true" requiredMessage="Obligatorio" value="#{altaUsuarioController.user.password}" toggleMask="true" redisplay="true"/>
                                    <p:message for="pass2"/>
                                </p:panelGrid>
                            </p:fieldset>
                        </p:panelGrid>

                        <p:panelGrid id="grid2" columns="1" layout="grid" styleClass="ui-panelgrid-blank ui-fluid" style="border:0px none; background-color:transparent; width: 15%; margin: 0 auto;">
                            <p:commandButton id="submitButton" icon="pi pi-check" actionListener="#{altaUsuarioController.insertarUsuario()}" value="Registrar" update="grid,grid2" styleClass="mt-3" />
                            <p:messages id="messageId" severity="info,fatal"/>
                        </p:panelGrid>
                    </h:form>
                </h:body>
            </ui:define>

        </ui:composition>

    </body>
</html>
